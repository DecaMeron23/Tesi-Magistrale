/*
 * srv_pwm.h
 *
 *  Created on: 14 gen 2026
 *      Author: emilio
 */

#ifndef _SRV_PWM_H
#define _SRV_PWM_H

#include "main.h"

/**
 * Inizzializzazione del servizio PWM
 */
void SRV_PWM_Init();

/**
 * Lettura della frequenza in Hz
 *
 * @param pData 	[out] Dove verranno salvati i valori, 4 Byte
 */
void SRV_PWM_ReadFrequency(uint8_t *pData);

/**
 * Start o Stop delle notifiche relative alla frequenza
 *
 * @param state		Se pari a zero allora si esegue lo start nella notifica, altrimenti si fermano le notifiche.
 */
void SRV_PWM_NotifyFrequency(uint8_t state);

/**
 * Lettura del duty cylce in percentuale
 *
 * @param pData		[out] Dove verranno salvati i valori, 1 Byte
 */
void SRV_PWM_ReadDutyCycle(uint8_t *pData);

/**
 * Start o Stop delle notifiche relative al duty cycle
 *
 * @param state		Se pari a zero allora si esegue lo start nella notifica, altrimenti si fermano le notifiche.
 */
void SRV_PWM_NotifyDutyCicle(uint8_t state);

void StartStopNotify(uint8_t state, uint8_t contestSrv)
{
	if (state)
	{
		HW_TS_Start(contestSrv->timerFreq_ID, DUE_SECONDI);
	}
	else
	{
		HW_TS_Stop(contestSrv->timerFreq_ID);
	}
}

#endif /* _SRV_PWM_H */
